{% extends "admin/base.html" %}

{% block title %}{{ action }} List Item - RFPO Admin{% endblock %}

{% block content %}
<div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
    <h1 class="h2">‚öôÔ∏è {{ action }} Configuration List Item</h1>
    <div class="btn-toolbar mb-2 mb-md-0">
        <a href="{{ url_for('lists') }}" class="btn btn-outline-secondary">
            <i class="fas fa-arrow-left"></i> Back to Lists
        </a>
    </div>
</div>

<div class="card">
    <div class="card-body">
        <form method="POST">
            <div class="row">
                <div class="col-md-6">
                    <h5 class="mb-3">üìã Configuration Item</h5>
                    
                    {% if list_item %}
                    <div class="mb-3">
                        <label for="list_id" class="form-label">List ID</label>
                        <input type="text" class="form-control" id="list_id" name="list_id" 
                               value="{{ list_item.list_id }}" readonly>
                        <div class="form-text">Auto-generated unique identifier</div>
                    </div>
                    {% else %}
                    <div class="alert alert-info">
                        <i class="fas fa-info-circle"></i> <strong>List ID</strong> will be auto-generated when you save
                    </div>
                    {% endif %}
                    
                    <div class="mb-3">
                        <label for="type" class="form-label">Type <span class="text-danger">*</span></label>
                        <input type="text" class="form-control" id="type" name="type" 
                               value="{{ list_item.type if list_item else '' }}" required
                               placeholder="e.g., adminlevel, rfpo_appro"
                               list="typeOptions">
                        <datalist id="typeOptions">
                            {% for existing_type in existing_types %}
                            <option value="{{ existing_type }}">
                            {% endfor %}
                            <option value="adminlevel">
                            <option value="meeting_it">
                            <option value="rfpo_appro">
                            <option value="rfpo_brack">
                            <option value="rfpo_statu">
                        </datalist>
                        <div class="form-text">Configuration category</div>
                    </div>
                    
                    <div class="mb-3">
                        <label for="key" class="form-label">Key <span class="text-danger">*</span></label>
                        <input type="text" class="form-control" id="key" name="key" 
                               value="{{ list_item.key if list_item else '' }}" required
                               placeholder="e.g., GOD, RFPO_ADMIN">
                        <div class="form-text">Unique identifier within the type</div>
                    </div>
                    
                    <div class="mb-3">
                        <label for="value" class="form-label">Value <span class="text-danger">*</span></label>
                        <input type="text" class="form-control" id="value" name="value" 
                               value="{{ list_item.value if list_item else '' }}" required
                               placeholder="e.g., Super Admin, RFPO Full Admin">
                        <div class="form-text">Human-readable description</div>
                    </div>
                    
                    <div class="mb-3">
                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" id="active" 
                                   name="active" value="1"
                                   {{ 'checked' if not list_item or list_item.active else '' }}>
                            <label class="form-check-label" for="active">
                                Active
                            </label>
                        </div>
                    </div>
                </div>
                
                <div class="col-md-6">
                    <h5 class="mb-3">üìñ Configuration Types</h5>
                    
                    <div class="card">
                        <div class="card-body">
                            <h6 class="card-title">Available Types:</h6>
                            <ul class="list-unstyled">
                                <li><code>adminlevel</code> - User permission levels</li>
                                <li><code>meeting_it</code> - Meeting/IT resource types</li>
                                <li><code>rfpo_appro</code> - RFPO approval workflow</li>
                                <li><code>rfpo_brack</code> - RFPO budget brackets</li>
                                <li><code>rfpo_statu</code> - RFPO status values</li>
                            </ul>
                        </div>
                    </div>
                    
                    {% if list_item %}
                    <div class="card mt-3">
                        <div class="card-header">
                            <h6 class="mb-0">üìä Item Information</h6>
                        </div>
                        <div class="card-body">
                            <p><strong>Created:</strong> {{ list_item.created_at.strftime('%Y-%m-%d %H:%M:%S') if list_item.created_at else 'Unknown' }}</p>
                            <p><strong>Created By:</strong> {{ list_item.created_by or 'Unknown' }}</p>
                            {% if list_item.updated_at %}
                            <p><strong>Updated:</strong> {{ list_item.updated_at.strftime('%Y-%m-%d %H:%M:%S') }}</p>
                            <p><strong>Updated By:</strong> {{ list_item.updated_by or 'Unknown' }}</p>
                            {% endif %}
                        </div>
                    </div>
                    {% endif %}
                </div>
            </div>
            
            <div class="row mt-4">
                <div class="col-12">
                    <hr>
                    <div class="d-flex justify-content-between">
                        <a href="{{ url_for('lists') }}" class="btn btn-secondary">
                            <i class="fas fa-times"></i> Cancel
                        </a>
                        <button type="submit" class="btn btn-primary">
                            <i class="fas fa-save"></i> {{ action }} List Item
                        </button>
                    </div>
                </div>
            </div>
        </form>
    </div>
</div>
{% endblock %}



